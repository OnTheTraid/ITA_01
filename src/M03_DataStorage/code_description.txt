======================

üß© –ú–æ–¥—É–ª—å 03_DataStorage

–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:
–ú–æ–¥—É–ª—å –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –∑–∞–≥—Ä—É–∑–∫—É –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞ ITA –≤ —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–∞—Ö ‚Äî JSON, DataFrame (Parquet/CSV) –∏ –±–∏–Ω–∞—Ä–Ω—ã–µ —Ñ–∞–π–ª—ã.
–û–Ω –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –Ω–∞–¥—ë–∂–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ, –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É –º–æ–¥—É–ª—è–º–∏ –ø—Ä–æ–µ–∫—Ç–∞.

üì¶ –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:

save_json() / load_json() ‚Äî —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –∑–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–ø–∞—Ä–∞–º–µ—Ç—Ä—ã, —Å–∏–≥–Ω–∞–ª—ã, —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã).

save_dataframe() / load_dataframe() ‚Äî —Ä–∞–±–æ—Ç–∞ —Å —Ç–∞–±–ª–∏—Ü–∞–º–∏ (–±–µ–∫—Ç–µ—Å—Ç—ã, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞).

save_binary() / load_binary() ‚Äî —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –±–∏–Ω–∞—Ä–Ω—ã—Ö –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, –º–æ–¥–µ–ª–∏ –∏ –¥—Ä.).

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø—É—Ç–∏ —Ö—Ä–∞–Ω–µ–Ω–∏—è —á–µ—Ä–µ–∑ –∫–æ–Ω—Ñ–∏–≥ config.yaml.

–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –±–µ–∑–æ–ø–∞—Å–Ω—É—é –∑–∞–ø–∏—Å—å —Ñ–∞–π–ª–æ–≤ —á–µ—Ä–µ–∑ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ .tmp –∫–æ–ø–∏–∏.

–õ–æ–≥–∏—Ä—É–µ—Ç –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è —Ö—Ä–∞–Ω–∏–ª–∏—â–∞.
========================
‚öôÔ∏è –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ñ–∞–π–ª—ã:
–§–∞–π–ª	–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ
persistent_store.py	–û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö
metadata_schemas.py	–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ (ArtifactRef) —á–µ—Ä–µ–∑ Pydantic
path_resolver.py	–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø—É—Ç—å, –≥–¥–µ —Ö—Ä–∞–Ω–∏—Ç—å –∫–∞–∂–¥—ã–π —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö
test_store.py	–¢–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç—ã –º–æ–¥—É–ª—è
üß† –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:
from persistent_store import save_json, load_json

data = {"run_id": "test_001", "result": 42, "status": "ok"}
ref = save_json(data, kind="test_json", filename="demo_result.json")
print(load_json(ref))
======================
üß© –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∏ —Ä–∞–±–æ—Ç–∞ –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã—Ö Python-–º–æ–¥—É–ª–µ–π
1. persistent_store.py

–ú–æ–¥—É–ª—å –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞ ITA.
–û–Ω —É–º–µ–µ—Ç —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –∏ –∑–∞–≥—Ä—É–∂–∞—Ç—å —Ñ–∞–π–ª—ã (JSON, CSV, Parquet –∏ –¥—Ä.), —É–ø—Ä–∞–≤–ª—è—Ç—å –≤–µ—Ä—Å–∏—è–º–∏, —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∫–∞—Ç–∞–ª–æ–≥–æ–≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å —Å—Å—ã–ª–∫–∏ –Ω–∞ —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã.
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤—Å–µ–º–∏ –¥—Ä—É–≥–∏–º–∏ –º–æ–¥—É–ª—è–º–∏, —á—Ç–æ–±—ã —Ä–∞–±–æ—Ç–∞—Ç—å —Å –¥–∞–Ω–Ω—ã–º–∏ –æ–¥–∏–Ω–∞–∫–æ–≤–æ –∏ –±–µ–∑ –æ—à–∏–±–æ–∫.

–ü—Ä–æ—Å—Ç–æ:
–≠—Ç–æ –±–∞–∑–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è ‚Äî —Ç—É–¥–∞ –≤—Å—ë —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∏ –æ—Ç—Ç—É–¥–∞ –≤—Å—ë —á–∏—Ç–∞–µ—Ç—Å—è.

2. run_snapshot.py

–ú–æ–¥—É–ª—å —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç —Å–Ω–∞–ø—à–æ—Ç—ã (—Å–Ω–∏–º–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è) –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ —Å–∏—Å—Ç–µ–º—ã:
–æ–Ω –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç, —Å –∫–∞–∫–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏, –ø—Ä–∞–≤–∏–ª–∞–º–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –≤—ã–ø–æ–ª–Ω—è–ª—Å—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –∑–∞–ø—É—Å–∫.
–°–æ—Ö—Ä–∞–Ω—è–µ—Ç:

ID –∑–∞–ø—É—Å–∫–∞, –≤–µ—Ä—Å–∏—é –ø—Ä–∞–≤–∏–ª –∏ —Å–µ—Ç–∞–ø–∞,

Git-commit, –æ–∫—Ä—É–∂–µ–Ω–∏–µ (Python, –û–°),

–¥–∏–∞–ø–∞–∑–æ–Ω –¥–∞–Ω–Ω—ã—Ö –∏ —Ö—ç—à –≤—Ö–æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞.

–ü–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ—Ç–æ–º —Ç–æ—á–Ω–æ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ –ª—é–±–æ–π –∑–∞–ø—É—Å–∫ –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, –Ω–µ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å –ª–∏ –¥–∞–Ω–Ω—ã–µ.
–†–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ persistent_store –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –µ–¥–∏–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Ö—Ä–∞–Ω–µ–Ω–∏—è (JSON –≤ data/results/provenance/).

–ü—Ä–æ—Å—Ç–æ:
–û–Ω —Å–æ–∑–¥–∞—ë—Ç –æ—Ç—á—ë—Ç –æ –∫–∞–∂–¥–æ–º –∑–∞–ø—É—Å–∫–µ ‚Äî –∫—Ç–æ, –∫–æ–≥–¥–∞, —Å –∫–∞–∫–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –∏ –≤–µ—Ä—Å–∏—è–º–∏ –ø—Ä–∞–≤–∏–ª –∑–∞–ø—É—Å—Ç–∏–ª —Å–∏—Å—Ç–µ–º—É.

3. test_run_snapshot.py

–≠—Ç–æ –ø—Ä–æ—Å—Ç–æ–π —Ç–µ—Å—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ run_snapshot —Ä–∞–±–æ—Ç–∞–µ—Ç:
—Å–æ–∑–¥–∞—ë—Ç —Ç–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—É—Å–∫, —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –µ–≥–æ, –∑–∞–≥—Ä—É–∂–∞–µ—Ç –æ–±—Ä–∞—Ç–Ω–æ –∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–π —Ö—ç—à –¥–∞–Ω–Ω—ã—Ö.

–ü—Ä–æ—Å—Ç–æ:
–û–Ω –¥–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç ‚Äî —Å–Ω–∞–ø—à–æ—Ç—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –∏ —á–∏—Ç–∞—é—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫.
==============